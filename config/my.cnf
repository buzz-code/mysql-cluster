[mysqld]
# --- Basic Settings ---
user = mysql
pid-file = /var/run/mysqld/mysqld.pid
socket = /var/run/mysqld/mysqld.sock
port = 3306
datadir = /var/lib/mysql

# --- Stability & Connections ---
# ברירת המחדל היא 151. נעלה ל-500 כדי לתמוך בכל ה-Stacks שלך במקביל
max_connections = 500
# מונע ניתוקים במקרה של פאקטות גדולות (למשל ייבוא SQL כבד)
max_allowed_packet = 64M

# --- Performance Optimization (8GB RAM Target) ---
# זהו הפרמטר הכי חשוב! נקצה כ-60-70% מהזיכרון ל-MySQL
# זה משאיר כ-2GB למערכת ההפעלה ולתהליכים אחרים, ונותן 5GB נטו למסד הנתונים
innodb_buffer_pool_size = 5G

# גודל קובץ הלוג. משפר מאוד מהירות כתיבה (Writes). 
# הערך המומלץ הוא כ-25% מה-Buffer Pool
innodb_log_file_size = 1G

# --- Cache Settings ---
# מטמון עבור שאילתות וטבלאות פתוחות
table_open_cache = 4000
table_definition_cache = 2000

# --- Logging (Optional but recommended) ---
# נחוץ אם תרצי רפליקציה בעתיד וגם לשיחזור
log_bin = /var/lib/mysql/mysql-bin.log
server_id = 1
expire_logs_days = 7  # מחיקה אוטומטית של לוגים ישנים כדי לא לסתום את הדיסק
slow_query_log = 1    # כדי שתוכלי לראות אילו שאילתות איטיות
long_query_time = 2   # רק שאילתות שלוקחות מעל 2 שניות ייכנסו ללוג
